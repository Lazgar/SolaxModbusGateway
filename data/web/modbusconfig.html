<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'/>
    <meta charset='utf-8'>
    <link rel='stylesheet' type='text/css' href='/web/Style.css'>
    <script language='javascript' type='text/javascript' src='/web/Javascript.js'></script>
    <script language='javascript' type='text/javascript' src='/web/modbusconfig.js'></script>
    <title>ModbusConfig</title>
  </head>
  <body>
    <div id="loader"></div>
    <form id='DataForm'>
      <table id='maintable' class='editorDemoTable'>
        <thead>
          <tr>
            <td style='width: 250px;'>Name</td>
            <td style='width: 200px;'>Wert</td>
          </tr>
        </thead>
      <tbody>
        <tr>
         <td>Modbus RX-Pin (Default: 16)</td>
          <td><input min='0' max='255' id='GpioPin_RX' name='pin_rx' type='number' style='width: 6em'/></td>
        </tr>

        <tr>
          <td>Modbus TX-Pin (Default: 17)</td>
          <td><input min='0' max='255' id='GpioPin_TX' name='pin_tx' type='number' style='width: 6em'/></td>
        </tr>

        <tr>
          <td>Modbus Direction Control RTS-Pin (Default: 18)</td>
          <td><input min='0' max='255' id='GpioPin_RTS' name='pin_rts' type='number' style='width: 6em'/></td>
        </tr>

        <tr>
          <td>Solax Modbus ClientID (in hex) (Default: 01)</td>
          <td><input maxlength='2' id='clientid' name='clientid' type='text' style='width: 6em'/></td>
        </tr>

        <tr>
          <td>Modbus Baudrate (Default: 19200)</td>
          <td><input min='9600' max='115200' id='baudrate' name='baudrate' type='number' style='width: 6em'/></td>
        </tr>

        <tr>
          <td>Interval for Live Datatransmission in sec (Default: 5)</td>
          <td><input min='2' max='3600' id='txintervallive' name='txintervallive' type='number' style='width: 6em'/></td>
        </tr>

        <tr>
          <td>Interval for ID Datatransmission in sec (Default: 3600)</td>
          <td><input min='10' max='86400' id='txintervalid' name='txintervalid' type='number' style='width: 6em'/></td>
        </tr>

        <tr>
          <td>Select Inverter Type (Default: Solax X1)</td>
          <td>
            <select name='invertertype' size='1' style='width: 10em'>
              <template id='inverters'>
                <option id='inverter'></option>
              </template>
            </select>  
          </td>
        </tr>

        <tr>
          <td colspan='2'>
          <div class='inline'>
            <input type='radio' id='EnableRelays_On' name='EnableRelays' value='1' onclick="radioselection(['EnableRelays_1','EnableRelays_2'],[])"/>
            <label for='EnableRelays_On'>enable reading inverter relay</label>
          </div>
          
          <div class='inline'>
            <input type='radio' id='EnableRelays_Off' name='EnableRelays' value='0' onclick="radioselection([],['EnableRelays_1','EnableRelays_2'])"/>
            <label for='EnableRelays_Off'>disable reading inverter relay</label>
          </div>  
          </td>
        </tr>

        <tr id='EnableRelays_1'>
          <td>Select connected Pin to read Relay 1</td>
           <td><input min='0' max='255' id='GpioPin_Relay1' name='pin_RELAY1' type='number' style='width: 6em'/></td>
         </tr>
 
         <tr id='EnableRelays_2'>
          <td>Select connected Pin to read Relay 2</td>
           <td><input min='0' max='255' id='GpioPin_Relay2' name='pin_RELAY2' type='number' style='width: 6em'/></td>
         </tr>

        <tr>
          <td>Enable OpenWB Compatibility</td>
          <td>
            <div class='onoffswitch'>
              <input type='checkbox' name='enable_openwbtopic' class='onoffswitch-checkbox' id='enable_openwbtopic'>
              <label class='onoffswitch-label' for='enable_openwbtopic'>
                <span class='onoffswitch-inner'></span>
                <span class='onoffswitch-switch'></span>
              </label>
            </div>
          </td>
        </tr>
          
        <tr>
          <td>Enable Dataframe CRC Check</td>
          <td>
            <div class='onoffswitch'>
              <input type='checkbox' name='enableCrcCheck' class='onoffswitch-checkbox' id='enableCrcCheck'>
              <label class='onoffswitch-label' for='enableCrcCheck'>
                <span class='onoffswitch-inner'></span>
                <span class='onoffswitch-switch'></span>
              </label>
            </div>
          </td>
        </tr>

        <tr>
          <td>Enable Dataframe Length Check</td>
          <td>
            <div class='onoffswitch'>
              <input type='checkbox' name='enableLengthCheck' class='onoffswitch-checkbox' id='enableLengthCheck'>
              <label class='onoffswitch-label' for='enableLengthCheck'>
                <span class='onoffswitch-inner'></span>
                <span class='onoffswitch-switch'></span>
              </label>
            </div>
          </td>
        </tr>

          <tr>
          <td>Enable Set Commands over MQTT (security issue)</td>
            <td>
              <div class='onoffswitch'>
                <input type='checkbox' name='enable_setters' class='onoffswitch-checkbox' id='enable_setters'>
                <label class='onoffswitch-label' for='enable_setters'>
                  <span class='onoffswitch-inner'></span>
                  <span class='onoffswitch-switch'></span>
                </label>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </form>
    <br/>
    <br/>
    <input type='submit' onclick="onSubmit('DataForm')" value='Speichern' />
    <span id='response'></span>
  </body>
</html>